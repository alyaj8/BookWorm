{"version":3,"sources":["useStripe.tsx"],"names":["useStripe","isApplePaySupported","setApplePaySupported","checkApplePaySupport","isiOS","NativeStripeSdk","isSupported","_createPaymentMethod","data","options","_createToken","params","_retrievePaymentIntent","clientSecret","_retrieveSetupIntent","_confirmPayment","paymentIntentClientSecret","_presentApplePay","_updateApplePaySummaryItems","summaryItems","errorAddressFields","_confirmApplePayPayment","_handleNextAction","_confirmSetupIntent","_createTokenForCVCUpdate","cvc","_initPaymentSheet","_presentPaymentSheet","_confirmPaymentSheetPayment","_handleURLCallback","url","_isGooglePaySupported","_initGooglePay","_presentGooglePay","_createGooglePayPaymentMethod","_openApplePaySetup","_collectBankAccountForPayment","_collectBankAccountForSetup","_verifyMicrodepositsForPayment","_verifyMicrodepositsForSetup","retrievePaymentIntent","retrieveSetupIntent","confirmPayment","createPaymentMethod","handleNextAction","presentApplePay","confirmApplePayPayment","confirmSetupIntent","createTokenForCVCUpdate","updateApplePaySummaryItems","handleURLCallback","confirmPaymentSheetPayment","presentPaymentSheet","initPaymentSheet","createToken","isGooglePaySupported","initGooglePay","presentGooglePay","createGooglePayPaymentMethod","openApplePaySetup","collectBankAccountForPayment","collectBankAccountForSetup","verifyMicrodepositsForPayment","verifyMicrodepositsForSetup"],"mappings":"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","sourcesContent":["import type {\n  PaymentMethod,\n  ApplePay,\n  PaymentSheet,\n  CreatePaymentMethodResult,\n  RetrievePaymentIntentResult,\n  RetrieveSetupIntentResult,\n  ConfirmPaymentResult,\n  HandleNextActionResult,\n  ConfirmSetupIntentResult,\n  CreateTokenForCVCUpdateResult,\n  ApplePayResult,\n  ApplePayError,\n  StripeError,\n  InitPaymentSheetResult,\n  PresentPaymentSheetResult,\n  ConfirmPaymentSheetPaymentResult,\n  SetupIntent,\n  CreateTokenResult,\n  PayWithGooglePayResult,\n  GooglePayInitResult,\n  GooglePay,\n  CreateGooglePayPaymentMethodResult,\n  OpenApplePaySetupResult,\n  Token,\n  VerifyMicrodepositsParams,\n  VerifyMicrodepositsForPaymentResult,\n  VerifyMicrodepositsForSetupResult,\n  CollectBankAccountForSetupResult,\n  CollectBankAccountForPaymentResult,\n} from '../types';\nimport { useCallback, useEffect, useState } from 'react';\nimport { isiOS } from '../helpers';\nimport NativeStripeSdk from '../NativeStripeSdk';\nimport {\n  confirmPayment,\n  createPaymentMethod,\n  retrievePaymentIntent,\n  retrieveSetupIntent,\n  confirmApplePayPayment,\n  confirmSetupIntent,\n  createTokenForCVCUpdate,\n  handleNextAction,\n  handleURLCallback,\n  presentApplePay,\n  updateApplePaySummaryItems,\n  initPaymentSheet,\n  presentPaymentSheet,\n  confirmPaymentSheetPayment,\n  createToken,\n  isGooglePaySupported,\n  initGooglePay,\n  createGooglePayPaymentMethod,\n  presentGooglePay,\n  openApplePaySetup,\n  collectBankAccountForPayment,\n  collectBankAccountForSetup,\n  verifyMicrodepositsForPayment,\n  verifyMicrodepositsForSetup,\n} from '../functions';\n\n/**\n * useStripe hook\n */\nexport function useStripe() {\n  const [isApplePaySupported, setApplePaySupported] = useState<boolean | null>(\n    null\n  );\n\n  useEffect(() => {\n    async function checkApplePaySupport() {\n      const isSupported =\n        isiOS && (await NativeStripeSdk.isApplePaySupported());\n      setApplePaySupported(isSupported);\n    }\n\n    checkApplePaySupport();\n  }, []);\n\n  const _createPaymentMethod = useCallback(\n    async (\n      data: PaymentMethod.CreateParams,\n      options: PaymentMethod.CreateOptions = {}\n    ): Promise<CreatePaymentMethodResult> => {\n      return createPaymentMethod(data, options);\n    },\n    []\n  );\n\n  const _createToken = useCallback(\n    async (params: Token.CreateParams): Promise<CreateTokenResult> => {\n      return createToken(params);\n    },\n    []\n  );\n\n  const _retrievePaymentIntent = useCallback(\n    async (clientSecret: string): Promise<RetrievePaymentIntentResult> => {\n      return retrievePaymentIntent(clientSecret);\n    },\n    []\n  );\n\n  const _retrieveSetupIntent = useCallback(\n    async (clientSecret: string): Promise<RetrieveSetupIntentResult> => {\n      return retrieveSetupIntent(clientSecret);\n    },\n    []\n  );\n\n  const _confirmPayment = useCallback(\n    async (\n      paymentIntentClientSecret: string,\n      data: PaymentMethod.ConfirmParams,\n      options: PaymentMethod.ConfirmOptions = {}\n    ): Promise<ConfirmPaymentResult> => {\n      return confirmPayment(paymentIntentClientSecret, data, options);\n    },\n    []\n  );\n\n  const _presentApplePay = useCallback(\n    async (params: ApplePay.PresentParams): Promise<ApplePayResult> => {\n      return presentApplePay(params);\n    },\n    []\n  );\n\n  const _updateApplePaySummaryItems = useCallback(\n    async (\n      summaryItems: ApplePay.CartSummaryItem[],\n      errorAddressFields: Array<{\n        field: ApplePay.AddressFields;\n        message?: string;\n      }> = []\n    ): Promise<{ error?: StripeError<ApplePayError> }> => {\n      return updateApplePaySummaryItems(summaryItems, errorAddressFields);\n    },\n    []\n  );\n\n  const _confirmApplePayPayment = useCallback(\n    async (\n      clientSecret: string\n    ): Promise<{ error?: StripeError<ApplePayError> }> => {\n      return confirmApplePayPayment(clientSecret);\n    },\n    []\n  );\n\n  const _handleNextAction = useCallback(\n    async (\n      paymentIntentClientSecret: string\n    ): Promise<HandleNextActionResult> => {\n      return handleNextAction(paymentIntentClientSecret);\n    },\n    []\n  );\n\n  const _confirmSetupIntent = useCallback(\n    async (\n      paymentIntentClientSecret: string,\n      data: SetupIntent.ConfirmParams,\n      options: SetupIntent.ConfirmOptions = {}\n    ): Promise<ConfirmSetupIntentResult> => {\n      return confirmSetupIntent(paymentIntentClientSecret, data, options);\n    },\n    []\n  );\n\n  const _createTokenForCVCUpdate = useCallback(\n    async (cvc: string): Promise<CreateTokenForCVCUpdateResult> => {\n      return createTokenForCVCUpdate(cvc);\n    },\n    []\n  );\n\n  const _initPaymentSheet = useCallback(\n    async (\n      params: PaymentSheet.SetupParams\n    ): Promise<InitPaymentSheetResult> => {\n      return initPaymentSheet(params);\n    },\n    []\n  );\n\n  const _presentPaymentSheet =\n    useCallback(async (): Promise<PresentPaymentSheetResult> => {\n      return presentPaymentSheet();\n    }, []);\n\n  const _confirmPaymentSheetPayment =\n    useCallback(async (): Promise<ConfirmPaymentSheetPaymentResult> => {\n      return confirmPaymentSheetPayment();\n    }, []);\n\n  const _handleURLCallback = useCallback(\n    async (url: string): Promise<boolean> => {\n      return handleURLCallback(url);\n    },\n    []\n  );\n\n  const _isGooglePaySupported = useCallback(\n    async (params?: GooglePay.IsSupportedParams): Promise<boolean> => {\n      return isGooglePaySupported(params);\n    },\n    []\n  );\n\n  const _initGooglePay = useCallback(\n    async (params: GooglePay.InitParams): Promise<GooglePayInitResult> => {\n      return initGooglePay(params);\n    },\n    []\n  );\n\n  const _presentGooglePay = useCallback(\n    async (\n      params: GooglePay.PresentParams\n    ): Promise<PayWithGooglePayResult> => {\n      return presentGooglePay(params);\n    },\n    []\n  );\n\n  const _createGooglePayPaymentMethod = useCallback(\n    async (\n      params: GooglePay.CreatePaymentMethodParams\n    ): Promise<CreateGooglePayPaymentMethodResult> => {\n      return createGooglePayPaymentMethod(params);\n    },\n    []\n  );\n\n  const _openApplePaySetup =\n    useCallback(async (): Promise<OpenApplePaySetupResult> => {\n      return openApplePaySetup();\n    }, []);\n\n  const _collectBankAccountForPayment = useCallback(\n    async (\n      clientSecret: string,\n      params: PaymentMethod.CollectBankAccountParams\n    ): Promise<CollectBankAccountForPaymentResult> => {\n      return collectBankAccountForPayment(clientSecret, params);\n    },\n    []\n  );\n\n  const _collectBankAccountForSetup = useCallback(\n    async (\n      clientSecret: string,\n      params: PaymentMethod.CollectBankAccountParams\n    ): Promise<CollectBankAccountForSetupResult> => {\n      return collectBankAccountForSetup(clientSecret, params);\n    },\n    []\n  );\n\n  const _verifyMicrodepositsForPayment = useCallback(\n    async (\n      clientSecret: string,\n      params: VerifyMicrodepositsParams\n    ): Promise<VerifyMicrodepositsForPaymentResult> => {\n      return verifyMicrodepositsForPayment(clientSecret, params);\n    },\n    []\n  );\n\n  const _verifyMicrodepositsForSetup = useCallback(\n    async (\n      clientSecret: string,\n      params: VerifyMicrodepositsParams\n    ): Promise<VerifyMicrodepositsForSetupResult> => {\n      return verifyMicrodepositsForSetup(clientSecret, params);\n    },\n    []\n  );\n\n  return {\n    retrievePaymentIntent: _retrievePaymentIntent,\n    retrieveSetupIntent: _retrieveSetupIntent,\n    confirmPayment: _confirmPayment,\n    createPaymentMethod: _createPaymentMethod,\n    handleNextAction: _handleNextAction,\n    isApplePaySupported: isApplePaySupported,\n    presentApplePay: _presentApplePay,\n    confirmApplePayPayment: _confirmApplePayPayment,\n    confirmSetupIntent: _confirmSetupIntent,\n    createTokenForCVCUpdate: _createTokenForCVCUpdate,\n    updateApplePaySummaryItems: _updateApplePaySummaryItems,\n    handleURLCallback: _handleURLCallback,\n    confirmPaymentSheetPayment: _confirmPaymentSheetPayment,\n    presentPaymentSheet: _presentPaymentSheet,\n    initPaymentSheet: _initPaymentSheet,\n    createToken: _createToken,\n    isGooglePaySupported: _isGooglePaySupported,\n    initGooglePay: _initGooglePay,\n    presentGooglePay: _presentGooglePay,\n    createGooglePayPaymentMethod: _createGooglePayPaymentMethod,\n    openApplePaySetup: _openApplePaySetup,\n    collectBankAccountForPayment: _collectBankAccountForPayment,\n    collectBankAccountForSetup: _collectBankAccountForSetup,\n    verifyMicrodepositsForPayment: _verifyMicrodepositsForPayment,\n    verifyMicrodepositsForSetup: _verifyMicrodepositsForSetup,\n  };\n}\n"]}